<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EVM Voting System</title>
    <link rel="stylesheet" href="css/styles.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;600;700&family=Inter:wght@400;500;600;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="main-container">
        <!-- Header Section -->
        <div class="evm-header">
            <h1>203 - ‡§≠‡•ã‡§∞ ‡§µ‡§ø‡§ß‡§æ‡§®‡§∏‡§≠‡§æ ‡§∏‡§æ‡§∞‡•ç‡§µ‡§§‡•ç‡§∞‡§ø‡§ï ‡§®‡§ø‡§µ‡§°‡§£‡•Ç‡§ï 2024</h1>
            <h2>‡§°‡§Æ‡•Ä ‡§Æ‡§§‡§¶‡§æ‡§® ‡§Ø‡§Ç‡§§‡•ç‡§∞</h2>
        </div>

        <!-- Warning Banner -->
        <div class="warning-banner-container">
            <div class="warning-text">
                ‡§Æ‡§§‡§¶‡§æ‡§®‡§æ‡§ö‡•ç‡§Ø‡§æ ‡§¶‡§ø‡§µ‡§∂‡•Ä ‡§∏‡•Å‡§¶‡•ç‡§ß‡§æ ‡§π‡§æ‡§§ ‡§ö‡§ø‡§®‡•ç‡§π‡§æ ‡§∏‡§Æ‡•ã‡§∞‡•Ä‡§≤ ‡§¨‡§ü‡§£ ‡§¶‡§æ‡§¨‡§æ‡§µ‡•á
            </div>
            <button class="whatsapp-share-btn" onclick="shareResults()">
                <span class="icon">‚úÜ</span> SHARE
            </button>
        </div>

        <!-- Start Voting / Test Buttons Toggle -->
        <div class="start-voting-section" id="start-voting-section">
            <button class="start-voting-btn" id="test-toggle-btn" onclick="toggleTestThenStart()">
                üõ†Ô∏è Test Buttons
            </button>
            <p id="test-mode-instructions" class="test-mode-instructions hidden">Test Mode active ‚Äî click any candidate button to verify hardware, audio and visuals. Click the same button again to start actual voting.</p>
        </div>

        <!-- Ballot Table (Hidden Initially) -->
        <div class="ballot-wrapper hidden" id="ballot-wrapper">
            <table class="evm-table">
                <thead>
                    <tr>
                        <th class="col-sr">‡§Ö.‡§ï‡•ç‡§∞</th>
                        <th class="col-name" colspan="2">‡§â‡§Æ‡•á‡§¶‡§µ‡§æ‡§∞‡§æ‡§ö‡•á ‡§®‡§æ‡§µ</th>
                        <th class="col-symbol">‡§ö‡§ø‡§®‡•ç‡§π</th>
                        <th class="col-bulb">‡§¨‡§≤‡•ç‡§¨</th>
                        <th class="col-btn">‡§¨‡§ü‡§£</th>
                    </tr>
                </thead>
                <tbody id="candidates-list">
                    <!-- Rows will be generated by JS -->
                </tbody>
            </table>
        </div>

        <!-- Mobile-friendly ballot (rendered separately for phones) -->
        <div id="mobile-ballot" class="mobile-ballot hidden" aria-hidden="true"></div>
    </div>

    <!-- Admin Interface (Hidden) -->
    <div id="admin-interface" class="interface hidden">
        <div class="admin-container">
            <div class="admin-header">
                <h2>Admin Dashboard</h2>
                <button class="btn btn-secondary" onclick="location.href='/'">‚Üê Exit Admin</button>
            </div>

            <div class="admin-tabs">
                <button class="tab-btn active" onclick="showTab('manage')">Manage Candidates</button>
                <button class="tab-btn" onclick="showTab('results')">View Results</button>
            </div>

            <div id="manage-tab" class="tab-content active">
                <div class="add-candidate-form">
                    <h3>Add Candidate</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Candidate Name</label>
                            <input type="text" id="candidate-name" placeholder="Full name">
                        </div>
                        <div class="form-group">
                            <label>Candidate Photo URL</label>
                            <input type="text" id="candidate-photo" placeholder="Image URL">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Symbol Image URL</label>
                            <input type="text" id="candidate-symbol" placeholder="Image URL">
                        </div>
                    </div>
                    <div class="form-actions">
                        <button class="btn btn-primary" onclick="saveCandidate()">Add Candidate</button>
                        <button class="btn btn-secondary" onclick="cancelEdit()">Clear</button>
                    </div>
                </div>

                <div class="candidates-list-admin">
                    <h3>Current Candidates</h3>
                    <div id="admin-candidates-list"></div>
                </div>
            </div>

            <div id="results-tab" class="tab-content">
                <div class="results-actions">
                    <button class="btn btn-success" onclick="shareResults()">üì± Share Results</button>
                    <button class="btn btn-primary" onclick="exportToExcel()">üìä Export to Excel</button>
                </div>
                <div class="results-summary">
                    <h3>Voting Results Summary</h3>
                    <div id="results-chart"></div>
                </div>
                <div class="detailed-votes">
                    <h3>Detailed Voting Records</h3>
                    <table class="details-table">
                        <thead>
                            <tr>
                                <th>IP Address</th>
                                <th>Voted For</th>
                                <th>Timestamp</th>
                            </tr>
                        </thead>
                        <tbody id="detailed-votes-list"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="vote-confirmation hidden" id="vote-confirmation">
        <div class="confirmation-content">
            <h3>‚úì Vote Submitted Successfully!</h3>
            <button onclick="location.reload()">OK</button>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="js/app.js"></script>
</body>

</html>